<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Software Testing Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .tab-button.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
            font-weight: 600;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-header.active + .accordion-content {
            max-height: 1500px; /* Adjust as needed */
        }
         .rotate-180 {
            transform: rotate(180deg);
        }
        .transition-transform {
            transition: transform 0.3s ease;
        }
        .bug-card {
             border-left-width: 4px;
        }
        .severity-critical {
             border-left-color: #ef4444;
        }
        .severity-high {
             border-left-color: #f97316;
        }
        .severity-medium {
            border-left-color: #f59e0b;
        }
        .searchable:not([style*="display: none;"]) {
            display: table-row;
        }
        .searchable-card:not([style*="display: none;"]) {
            display: block;
        }

    </style>
</head>
<body class="antialiased text-gray-800">

    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-4">
            <h1 class="text-4xl font-bold text-gray-900">Comprehensive Software Testing Report</h1>
            <p class="mt-2 text-lg text-gray-600">TEQAN CRM & Client Website</p>
        </header>

        <div class="mb-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="relative w-full md:w-1/3">
                <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                    <i class="fas fa-search text-gray-400"></i>
                </span>
                <input type="text" id="searchInput" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Search reports...">
            </div>
            <div class="w-full md:w-auto flex flex-col md:flex-row gap-2">
                <button id="importButton" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center">
                    <i class="fas fa-file-upload mr-2"></i> Import from Excel
                </button>
                <input type="file" id="csvFileInput" class="hidden" accept=".csv">
                <button id="exportButton" class="w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center">
                    <i class="fas fa-file-excel mr-2"></i> Export to Excel
                </button>
            </div>
        </div>


        <div class="bg-white rounded-xl shadow-lg p-6">
            <!-- Tabs Navigation -->
            <div class="border-b border-gray-200 mb-6">
                <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                    <button class="tab-button active py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-blue-600 hover:border-blue-300" data-tab="summary">
                        <i class="fas fa-chart-pie mr-2"></i>Summary
                    </button>
                    <button class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-blue-600 hover:border-blue-300" data-tab="test-cases">
                        <i class="fas fa-tasks mr-2"></i>Test Cases
                    </button>
                    <button class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-blue-600 hover:border-blue-300" data-tab="bug-reports">
                        <i class="fas fa-bug mr-2"></i>Bug Reports
                    </button>
                </nav>
            </div>

            <!-- Tabs Content -->
            <div id="tab-content">
                <!-- Summary Tab -->
                <div id="summary" class="tab-pane active">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-blue-50 border border-blue-200 p-5 rounded-lg text-center">
                            <h3 id="passRate" class="text-3xl font-bold text-blue-700">80%</h3>
                            <p class="text-blue-600 font-medium">Pass Rate</p>
                        </div>
                        <div class="bg-green-50 border border-green-200 p-5 rounded-lg text-center">
                            <h3 id="totalTests" class="text-3xl font-bold text-green-700">30</h3>
                            <p class="text-green-600 font-medium">Total Test Cases</p>
                        </div>
                         <div class="bg-yellow-50 border border-yellow-200 p-5 rounded-lg text-center">
                            <h3 id="bugsFound" class="text-3xl font-bold text-yellow-700">6</h3>
                            <p class="text-yellow-600 font-medium">Bugs Found</p>
                        </div>
                        <div class="bg-red-50 border border-red-200 p-5 rounded-lg text-center">
                            <h3 id="criticalBugs" class="text-3xl font-bold text-red-700">2</h3>
                            <p class="text-red-600 font-medium">Critical Bugs</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- CRM System Summary -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2">CRM System Analysis</h2>
                            <div>
                                <h3 class="text-lg font-semibold text-green-700 mb-2"><i class="fas fa-check-circle mr-2"></i>Strengths</h3>
                                <ul class="list-disc list-inside text-gray-700 space-y-1">
                                    <li>Perfect real-time data synchronization with client website.</li>
                                    <li>Intuitive and professional Arabic RTL design.</li>
                                    <li>Fast loading times and responsive interface.</li>
                                    <li>Robust document upload and attachment system.</li>
                                    <li>Comprehensive activity logging for accountability.</li>
                                    <li>Secure and stable session management.</li>
                                </ul>
                            </div>
                            <div class="mt-6">
                                <h3 class="text-lg font-semibold text-red-700 mb-2"><i class="fas fa-exclamation-triangle mr-2"></i>Critical Issues</h3>
                                <ul class="list-disc list-inside text-gray-700 space-y-1">
                                    <li><strong>Search functionality is non-operational across all modules.</strong></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Client Website Summary -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2">Client Website Analysis</h2>
                             <div>
                                <h3 class="text-lg font-semibold text-green-700 mb-2"><i class="fas fa-check-circle mr-2"></i>Strengths</h3>
                                <ul class="list-disc list-inside text-gray-700 space-y-1">
                                    <li>Seamless CRM integration with real-time data sync.</li>
                                    <li>Individual financing application process works flawlessly.</li>
                                    <li>Excellent Arabic language support and professional design.</li>
                                    <li>Successful contact form and order tracking functionality.</li>
                                    <li>Great performance and mobile responsiveness.</li>
                                </ul>
                            </div>
                            <div class="mt-6">
                                <h3 class="text-lg font-semibold text-red-700 mb-2"><i class="fas fa-exclamation-triangle mr-2"></i>Critical Issues</h3>
                                <ul class="list-disc list-inside text-gray-700 space-y-1">
                                    <li><strong>Company financing form is blocked by a non-functional 'City' dropdown.</strong></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test Cases Tab -->
                <div id="test-cases" class="tab-pane hidden">
                    <div class="space-y-4">
                        <!-- Accordion for CRM Test Cases -->
                        <div>
                            <div class="accordion-header bg-gray-100 hover:bg-gray-200 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                                <h3 class="font-semibold text-lg">CRM Test Cases</h3>
                                <i class="fas fa-chevron-down transition-transform"></i>
                            </div>
                            <div class="accordion-content">
                                <div class="p-4 border rounded-b-lg">
                                    <table id="crm-test-cases-table" class="w-full text-sm text-left text-gray-500">
                                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                            <tr>
                                                <th scope="col" class="px-6 py-3">ID</th>
                                                <th scope="col" class="px-6 py-3">Objective</th>
                                                <th scope="col" class="px-6 py-3">Priority</th>
                                                <th scope="col" class="px-6 py-3">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC001</td><td class="px-6 py-4">Login Authentication</td><td class="px-6 py-4"><span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Critical</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC002</td><td class="px-6 py-4">Dashboard Navigation</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC003</td><td class="px-6 py-4">Customer Management</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-red-50 border-b searchable"><td class="px-6 py-4">TC004</td><td class="px-6 py-4">Sales: Customer Search</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-red-600 font-bold"><i class="fas fa-times-circle mr-1"></i>FAIL</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC005</td><td class="px-6 py-4">Order Management</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-red-50 border-b searchable"><td class="px-6 py-4">TC006</td><td class="px-6 py-4">Orders: Search</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-red-600 font-bold"><i class="fas fa-times-circle mr-1"></i>FAIL</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC007</td><td class="px-6 py-4">Finance Management</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-red-50 border-b searchable"><td class="px-6 py-4">TC008</td><td class="px-6 py-4">Finance: Search</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-red-600 font-bold"><i class="fas fa-times-circle mr-1"></i>FAIL</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC009</td><td class="px-6 py-4">Vehicle Management</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                             <tr class="bg-red-50 border-b searchable"><td class="px-6 py-4">TC010</td><td class="px-6 py-4">Cars: Vehicle Search</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-red-600 font-bold"><i class="fas fa-times-circle mr-1"></i>FAIL</span></td></tr>
                                             <tr class="bg-red-50 border-b searchable"><td class="px-6 py-4">TC012</td><td class="px-6 py-4">Manufacturers: Search</td><td class="px-6 py-4"><span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Medium</span></td><td class="px-6 py-4"><span class="text-red-600 font-bold"><i class="fas fa-times-circle mr-1"></i>FAIL</span></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Accordion for Client Website Test Cases -->
                        <div>
                           <div class="accordion-header bg-gray-100 hover:bg-gray-200 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                                <h3 class="font-semibold text-lg">Client Website Test Cases</h3>
                                <i class="fas fa-chevron-down transition-transform"></i>
                            </div>
                             <div class="accordion-content">
                                <div class="p-4 border rounded-b-lg">
                                    <table id="client-test-cases-table" class="w-full text-sm text-left text-gray-500">
                                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                            <tr>
                                                <th scope="col" class="px-6 py-3">ID</th>
                                                <th scope="col" class="px-6 py-3">Objective</th>
                                                <th scope="col" class="px-6 py-3">Priority</th>
                                                <th scope="col" class="px-6 py-3">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC015</td><td class="px-6 py-4">Homepage Loading</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC016</td><td class="px-6 py-4">Vehicle Catalog</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC017</td><td class="px-6 py-4">Individual Financing</td><td class="px-6 py-4"><span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Critical</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-red-50 border-b searchable"><td class="px-6 py-4">TC018</td><td class="px-6 py-4">Company Financing</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-red-600 font-bold"><i class="fas fa-times-circle mr-1"></i>FAIL</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC019</td><td class="px-6 py-4">Order Tracking</td><td class="px-6 py-4"><span class="bg-orange-100 text-orange-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">High</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                            <tr class="bg-white border-b searchable"><td class="px-6 py-4">TC020</td><td class="px-6 py-4">Contact Form</td><td class="px-6 py-4"><span class="bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">Medium</span></td><td class="px-6 py-4"><span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bug Reports Tab -->
                <div id="bug-reports" class="tab-pane hidden">
                     <div class="space-y-6">
                        <!-- Bug Report Card 1 -->
                        <div class="bug-card bg-white shadow-md rounded-lg p-6 severity-critical searchable-card" data-bug-id="BUG-001">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-sm font-semibold text-red-600 bug-id">BUG-001</p>
                                    <h3 class="text-xl font-bold text-gray-900 mt-1 bug-title">CRM Search Functionality is Non-Operational</h3>
                                </div>
                                <span class="bug-severity bg-red-100 text-red-800 text-xs font-medium px-2.5 py-1 rounded-full">Critical</span>
                            </div>
                            <div class="mt-4">
                                <p class="text-gray-600"><strong class="font-semibold text-gray-800">Status:</strong> <span class="text-red-600 bug-status">Open</span></p>
                                <p class="text-gray-600 mt-2 bug-description"><strong class="font-semibold text-gray-800">Description:</strong> The global search functionality across all modules within the TEQAN CRM system consistently returns no results. This significantly hinders user productivity, forcing manual browsing to locate records.</p>
                                <div class="mt-4 bg-gray-50 p-4 rounded-md">
                                    <h4 class="font-semibold text-gray-800">Reproduction Steps:</h4>
                                    <ol class="list-decimal list-inside text-gray-600 mt-2 space-y-1">
                                        <li>Log in to the TEQAN CRM system.</li>
                                        <li>Navigate to any module (e.g., Sales, Orders, Cars).</li>
                                        <li>Enter a valid search term into the search bar.</li>
                                        <li>Press Enter or click the search icon.</li>
                                        <li><strong>Expected:</strong> A list of relevant results should be displayed.</li>
                                        <li><strong>Actual:</strong> The system displays a "No results found" message.</li>
                                    </ol>
                                </div>
                                <div class="mt-4"><p><strong class="font-semibold text-gray-800">Business Impact:</strong> Significant productivity loss for all CRM users. Critical functionality is unavailable.</p></div>
                                <div class="mt-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">Evidence:</h4>
                                    <div class="evidence-gallery grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                                    <button class="add-evidence-btn mt-2 text-sm text-blue-600 hover:text-blue-800 font-semibold"><i class="fas fa-plus-circle mr-1"></i> Add Image Evidence</button>
                                </div>
                            </div>
                        </div>

                        <!-- Bug Report Card 2 -->
                        <div class="bug-card bg-white shadow-md rounded-lg p-6 severity-high searchable-card" data-bug-id="BUG-002">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-sm font-semibold text-orange-600 bug-id">BUG-002</p>
                                    <h3 class="text-xl font-bold text-gray-900 mt-1 bug-title">Company Financing Form 'City' Dropdown is Non-Functional</h3>
                                </div>
                                <span class="bug-severity bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-1 rounded-full">High</span>
                            </div>
                           <div class="mt-4">
                                <p class="text-gray-600"><strong class="font-semibold text-gray-800">Status:</strong> <span class="text-red-600 bug-status">Open</span></p>
                                <p class="text-gray-600 mt-2 bug-description"><strong class="font-semibold text-gray-800">Description:</strong> The 'City' dropdown in the Company Financing form is non-functional. Clicking it does not reveal any options, preventing users from completing this required field and blocking the entire form submission process for corporate clients.</p>
                                <div class="mt-4 bg-gray-50 p-4 rounded-md">
                                    <h4 class="font-semibold text-gray-800">Reproduction Steps:</h4>
                                    <ol class="list-decimal list-inside text-gray-600 mt-2 space-y-1">
                                        <li>Navigate to the client website and open the "Company Financing" form.</li>
                                        <li>Complete Step 1 and proceed to Step 2.</li>
                                        <li>Attempt to click on the 'City' (المدينة) dropdown menu.</li>
                                        <li><strong>Expected:</strong> A list of cities should appear for selection.</li>
                                        <li><strong>Actual:</strong> Nothing happens. The form cannot be submitted due to validation requiring this field.</li>
                                    </ol>
                                </div>
                                <div class="mt-4"><p><strong class="font-semibold text-gray-800">Business Impact:</strong> Direct revenue loss as corporate clients cannot apply for financing online.</div>
                                <div class="mt-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">Evidence:</h4>
                                    <div class="evidence-gallery grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                                    <button class="add-evidence-btn mt-2 text-sm text-blue-600 hover:text-blue-800 font-semibold"><i class="fas fa-plus-circle mr-1"></i> Add Image Evidence</button>
                                </div>
                            </div>
                        </div>

                        <!-- Bug Report Card 3 -->
                        <div class="bug-card bg-white shadow-md rounded-lg p-6 severity-medium searchable-card" data-bug-id="BUG-003">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-sm font-semibold text-yellow-600 bug-id">BUG-003</p>
                                    <h3 class="text-xl font-bold text-gray-900 mt-1 bug-title">Manufacturers Module Search Failure</h3>
                                </div>
                                <span class="bug-severity bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-1 rounded-full">Medium</span>
                            </div>
                           <div class="mt-4">
                                <p class="text-gray-600"><strong class="font-semibold text-gray-800">Status:</strong> <span class="text-red-600 bug-status">Open</span></p>
                                <p class="text-gray-600 mt-2 bug-description"><strong class="font-semibold text-gray-800">Description:</strong> This bug is part of the system-wide search failure (BUG-001). The search in the Manufacturers module is non-functional. While the impact is lower due to a smaller dataset (6 manufacturers), it reflects the systemic nature of the search issue.</p>
                                <div class="mt-4 bg-gray-50 p-4 rounded-md">
                                    <h4 class="font-semibold text-gray-800">Reproduction Steps:</h4>
                                    <ol class="list-decimal list-inside text-gray-600 mt-2 space-y-1">
                                       <li>Log in to the CRM and navigate to the Manufacturers module.</li>
                                       <li>Enter a known manufacturer name (e.g., "Toyota") into the search bar.</li>
                                       <li><strong>Expected:</strong> The list should be filtered to show the "Toyota" record.</li>
                                       <li><strong>Actual:</strong> The system displays a "No results found" message.</li>
                                    </ol>
                                </div>
                                <div class="mt-4"><p><strong class="font-semibold text-gray-800">Business Impact:</strong> Minor productivity impact currently, but will worsen as the list of manufacturers grows.</div>
                                <div class="mt-4">
                                    <h4 class="font-semibold text-gray-800 mb-2">Evidence:</h4>
                                    <div class="evidence-gallery grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                                    <button class="add-evidence-btn mt-2 text-sm text-blue-600 hover:text-blue-800 font-semibold"><i class="fas fa-plus-circle mr-1"></i> Add Image Evidence</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Image Evidence Modal -->
    <div id="imageModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center hidden">
        <div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
            <div class="text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900">Add Image Evidence</h3>
                <div class="mt-2 px-7 py-3">
                    <input type="text" id="imageUrlInput" class="w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none" placeholder="Enter image URL or path (e.g., ./image.png)">
                </div>
                <div class="items-center px-4 py-3">
                    <button id="addImageBtn" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300">
                        Add Image
                    </button>
                     <button id="closeModalBtn" class="mt-2 px-4 py-2 bg-gray-200 text-gray-800 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-300 focus:outline-none">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Tab functionality
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabPanes = document.querySelectorAll('.tab-pane');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tab = button.dataset.tab;

                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    tabPanes.forEach(pane => {
                        if (pane.id === tab) {
                            pane.classList.remove('hidden');
                            pane.classList.add('active');
                        } else {
                            pane.classList.add('hidden');
                            pane.classList.remove('active');
                        }
                    });
                });
            });

            // Accordion functionality
            const accordionHeaders = document.querySelectorAll('.accordion-header');

            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const icon = header.querySelector('i');
                    header.classList.toggle('active');
                    icon.classList.toggle('rotate-180');
                });
            });

            // Search functionality
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keyup', () => {
                const filter = searchInput.value.toLowerCase();
                const searchableItems = document.querySelectorAll('.searchable, .searchable-card');
                
                searchableItems.forEach(item => {
                    const text = item.textContent || item.innerText;
                    if (text.toLowerCase().indexOf(filter) > -1) {
                        item.style.display = "";
                    } else {
                        item.style.display = "none";
                    }
                });
            });

            // Export to Excel (CSV) functionality
            const exportButton = document.getElementById('exportButton');
            exportButton.addEventListener('click', () => {
                let csv = [];
                let headers = ["Type", "ID", "Title/Objective", "Priority/Severity", "Status", "Description"];
                csv.push(headers.join(','));

                document.querySelectorAll('#test-cases tbody tr').forEach(row => {
                    let rowData = ["Test Case"];
                    let cells = row.querySelectorAll('td');
                    rowData.push('"' + cells[0].textContent.trim() + '"');
                    rowData.push('"' + cells[1].textContent.trim() + '"');
                    rowData.push('"' + cells[2].querySelector('span').textContent.trim() + '"');
                    rowData.push('"' + cells[3].textContent.trim() + '"');
                    rowData.push(""); 
                    csv.push(rowData.join(','));
                });

                document.querySelectorAll('.bug-card').forEach(card => {
                    let rowData = ["Bug Report"];
                    rowData.push('"' + card.querySelector('.bug-id').textContent.trim() + '"');
                    rowData.push('"' + card.querySelector('.bug-title').textContent.trim() + '"');
                    rowData.push('"' + card.querySelector('.bug-severity').textContent.trim() + '"');
                    rowData.push('"' + card.querySelector('.bug-status').textContent.trim() + '"');
                    const descElement = card.querySelector('.bug-description');
                    const descText = descElement ? descElement.textContent.replace('Description:', '').trim() : '';
                    rowData.push('"' + descText.replace(/"/g, '""') + '"');
                    csv.push(rowData.join(','));
                });

                let csvContent = "data:text/csv;charset=utf-8," + csv.join('\n');
                var encodedUri = encodeURI(csvContent);
                var link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "testing_report.csv");
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });
            
            // Modal functionality
            const imageModal = document.getElementById('imageModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const addImageBtn = document.getElementById('addImageBtn');
            const imageUrlInput = document.getElementById('imageUrlInput');
            let currentEvidenceGallery = null;

            document.querySelectorAll('.add-evidence-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    currentEvidenceGallery = e.target.closest('.bug-card').querySelector('.evidence-gallery');
                    imageModal.classList.remove('hidden');
                });
            });
            
            closeModalBtn.addEventListener('click', () => {
                imageModal.classList.add('hidden');
                imageUrlInput.value = '';
            });
            
            addImageBtn.addEventListener('click', () => {
                const imageUrl = imageUrlInput.value.trim();
                if(imageUrl && currentEvidenceGallery) {
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'relative';
                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.alt = 'Evidence Image';
                    img.className = 'w-full h-auto object-cover rounded-md border';
                    img.onerror = () => {
                         img.src = 'https://placehold.co/600x400/f3f4f6/9ca3af?text=Image+Not+Found';
                    };
                    imgContainer.appendChild(img);
                    currentEvidenceGallery.appendChild(imgContainer);
                }
                imageModal.classList.add('hidden');
                imageUrlInput.value = '';
            });

            // Import from CSV functionality
            const importButton = document.getElementById('importButton');
            const csvFileInput = document.getElementById('csvFileInput');

            importButton.addEventListener('click', () => {
                csvFileInput.click();
            });

            csvFileInput.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    Papa.parse(file, {
                        header: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            updateReportWithCSV(results.data);
                            alert('Report updated successfully!');
                        }
                    });
                }
            });

            function updateReportWithCSV(data) {
                data.forEach(row => {
                    if (row.Type === 'Test Case') {
                        const testCaseRow = findElementByTextContent(`#test-cases tbody tr td:first-child`, row.ID);
                        if (testCaseRow) {
                            const parentRow = testCaseRow.parentElement;
                            parentRow.children[1].textContent = row['Title/Objective'];
                            parentRow.children[2].querySelector('span').textContent = row['Priority/Severity'];
                            const statusCell = parentRow.children[3];
                            if(row.Status.toUpperCase() === 'PASS'){
                                statusCell.innerHTML = `<span class="text-green-600 font-bold"><i class="fas fa-check-circle mr-1"></i>PASS</span>`;
                                parentRow.classList.remove('bg-red-50');
                                parentRow.classList.add('bg-white');
                            } else {
                                statusCell.innerHTML = `<span class="text-red-600 font-bold"><i class="fas fa-times-circle mr-1"></i>FAIL</span>`;
                                parentRow.classList.add('bg-red-50');
                                parentRow.classList.remove('bg-white');
                            }
                        }
                    } else if (row.Type === 'Bug Report') {
                        const bugCard = document.querySelector(`.bug-card[data-bug-id="${row.ID}"]`);
                        if (bugCard) {
                            bugCard.querySelector('.bug-title').textContent = row['Title/Objective'];
                            bugCard.querySelector('.bug-severity').textContent = row['Priority/Severity'];
                            bugCard.querySelector('.bug-status').textContent = row.Status;
                            const descElement = bugCard.querySelector('.bug-description');
                            descElement.innerHTML = `<strong class="font-semibold text-gray-800">Description:</strong> ${row.Description}`;
                        }
                    }
                });
                 updateSummaryMetrics();
            }
            
            function findElementByTextContent(selector, text) {
                let foundElement = null;
                document.querySelectorAll(selector).forEach(el => {
                    if (el.textContent.trim() === text.trim()) {
                        foundElement = el;
                    }
                });
                return foundElement;
            }
            
            function updateSummaryMetrics() {
                const totalTests = document.querySelectorAll('#test-cases tbody tr').length;
                const passedTests = Array.from(document.querySelectorAll('#test-cases tbody tr td:last-child span')).filter(s => s.textContent.includes('PASS')).length;
                const bugsFound = document.querySelectorAll('.bug-card').length;
                const criticalBugs = document.querySelectorAll('.bug-card .bug-severity').length;


                const passRate = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;

                document.getElementById('passRate').textContent = `${passRate}%`;
                document.getElementById('totalTests').textContent = totalTests;
                document.getElementById('bugsFound').textContent = bugsFound;
                document.getElementById('criticalBugs').textContent = criticalBugs;
            }
        });
    </script>
</body>
</html>

